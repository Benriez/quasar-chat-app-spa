(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"44c2":function(e,s,t){"use strict";var a=t("f69c"),o=t.n(a);o.a},"5b17":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",{ref:"pageChat",staticClass:"page-chat flex column"},[e.otherUserDetails.online?e._e():t("q-banner",{staticClass:"bg-blue-grey-6 text-center fixed-top text-white"},[e._v("\n    "+e._s(e.otherUserDetails.name)+" offline\n  ")]),t("div",{staticClass:"q-pa-md column col justify-end",class:{invisible:!e.showMessages}},e._l(e.messages,(function(s,a){return t("q-chat-message",{key:a,attrs:{name:"me"==s.from?e.userDetails.name:e.otherUserDetails.name,text:[s.text],sent:"me"==s.from,"bg-color":"me"==s.from?"blue-grey-9":"blue-grey-10"}})})),1),t("q-footer",{attrs:{elevated:""}},[t("q-toolbar",[t("q-form",{staticClass:"full-width",on:{submit:e.sendMessage}},[t("div",{staticClass:"row"},[t("q-input",{ref:"newMessage",staticClass:"col-11",attrs:{"bg-color":"blue-grey-6",outlined:"",rounded:"",label:"Message",dense:""},on:{blur:e.scrollToBottom},model:{value:e.newMessage,callback:function(s){e.newMessage=s},expression:"newMessage"}}),t("q-btn",{staticClass:"col-1",attrs:{type:"submit",icon:"send",color:"white",round:"",dense:"",flat:""}})],1)])],1)],1)],1)},o=[],r=t("ded3"),n=t.n(r),i=t("2f62"),l=t("e883"),c={mixins:[l["a"]],data(){return{newMessage:"",showMessages:!1}},computed:n()({},Object(i["d"])("store",["messages","userDetails"])),methods:n()(n()({},Object(i["b"])("store",["firebaseGetMessages","firebaseStopGettingMessages","firebaseSendMessage"])),{},{sendMessage(){this.firebaseSendMessage({message:{text:this.newMessage,from:"me"},otherUserID:this.$route.params.otherUserID}),this.clearMessage()},clearMessage(){this.newMessage="",this.$refs.newMessage.focus()},scrollToBottom(){let e=this.$refs.pageChat.$el;setTimeout(()=>{window.scrollTo(0,e.scrollHeight)},20)}}),watch:{messages:function(e){Object.keys(e).length&&(this.scrollToBottom(),setTimeout(()=>{this.showMessages=!0},50))}},mounted(){this.firebaseGetMessages(this.$route.params.otherUserID)},destroyed(){this.firebaseStopGettingMessages()}},u=c,g=(t("44c2"),t("2877")),h=t("9989"),m=t("54e1"),f=t("8169"),d=t("7ff0"),b=t("65c6"),p=t("0378"),w=t("27f9"),M=t("9c40"),D=t("0016"),x=t("eebe"),C=t.n(x),$=Object(g["a"])(u,a,o,!1,null,null,null);s["default"]=$.exports;C()($,"components",{QPage:h["a"],QBanner:m["a"],QChatMessage:f["a"],QFooter:d["a"],QToolbar:b["a"],QForm:p["a"],QInput:w["a"],QBtn:M["a"],QIcon:D["a"]})},e883:function(e,s,t){"use strict";s["a"]={computed:{otherUserDetails(){return this.$store.state.store.users[this.$route.params.otherUserID]?this.$store.state.store.users[this.$route.params.otherUserID]:{}}}}},f69c:function(e,s,t){}}]);